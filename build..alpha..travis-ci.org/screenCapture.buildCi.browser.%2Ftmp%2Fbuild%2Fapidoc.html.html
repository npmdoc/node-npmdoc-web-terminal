<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/rabchev/web-terminal">web-terminal (v0.7.0)</a>
</h1>
<h4>Web-Terminal is a terminal server that provides remote CLI via standard web browser and HTTP protocol.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.web-terminal">module web-terminal</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.web-terminal.web-terminal">
            function <span class="apidocSignatureSpan"></span>web-terminal
            <span class="apidocSignatureSpan">(options, fn)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">web-terminal.</span>command</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">web-terminal.</span>streams</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.web-terminal.command">module web-terminal.command</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.web-terminal.command.parse">
            function <span class="apidocSignatureSpan">web-terminal.command.</span>parse
            <span class="apidocSignatureSpan">(commandLine)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.web-terminal.streams">module web-terminal.streams</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.web-terminal.streams.ReplStream">
            function <span class="apidocSignatureSpan">web-terminal.streams.</span>ReplStream
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.web-terminal" id="apidoc.module.web-terminal">module web-terminal</a></h1>


    <h2>
        <a href="#apidoc.element.web-terminal.web-terminal" id="apidoc.element.web-terminal.web-terminal">
        function <span class="apidocSignatureSpan"></span>web-terminal
        <span class="apidocSignatureSpan">(options, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initialize(options, fn) {

    var port, sPort, protocol, server;

    if (process.env.WEBT_LOGIN) {
        initLogin();
    }

    if ("function" === typeof options) {
        fn = options;
        options = {};
    }

    if (undefined === options.port) {
        if (process.env.PORT) {
            options.port = (+process.env.PORT);
        } else {
            options.port = (+config.port) || 8088;
        }
    }

    if ("string" === typeof options.port) {
        options.port = (+options.port);
    }

    if (/\b(?:\d{1,3}\.){3}\d{1,3}\b/.test(options.interface)) {
        var host = options.interface;
    }

    if ("number" === typeof options.port) {
        // if a port number is passed
        port = options.port;

        if (options &amp;&amp; options.key) {
            protocol = "https";
            sPort = (port !== 443) ? ":" + port : "";
        } else {
            protocol = "http";
            sPort = (port !== 80) ? ":" + port : "";
        }

        http = require(protocol);

        server = http.createServer();

        if (host) {
            server.listen(port, host, fn);
        } else {
            server.listen(port, fn);
        }
        standalone = true;

        console.log(util.format("Web-Terminal running at %s://localhost%s/terminal", protocol, sPort));
    }

    if (options) {
        autoClose = options.autoClose;
    }

    if (!config.root) {
        config.root = "/terminal";
    }

    server.on("request", function (req, res) {
        if (req.url.indexOf(config.root) === 0) {

            send(req, req.url.substr(config.root.length))
                .root(path.normalize(__dirname + "/../web"))
                .on("error", function (err) {
                    res.statusCode = err.status || 500;
                    res.end(err.message);
                })
                .on("directory", function () {
                    redirect(res, req.url + "/");
                })
                .pipe(res);
        } else if (standalone) {
            redirect(res, config.root);
        }
    });

    io = io.listen(server, { log: false });
    io.sockets.on("connection", function (socket) {

        var cwd         = process.cwd(),
            env         = _.clone(process.env),
            home        = process.env.HOME || process.env.HOMEPATH || process.env.USERPROFILE,
            linebreak   = "\n", // check if we need to add \r\n for windows
            promptChar  = process.platform === "win32" ? "&gt;" : "$",
            stdin,
            args,
            cmd,
            proc,
            dir,
            replSrv,
            user,
            username;

        function execCmd(command, shell, terminate) {
            if (env.WEBT_LOGIN &amp;&amp; !user) {
                socket.emit("exit", "login required");
                return;
            }

            var opts = { cwd: cwd, env: env };
            if (user) {
                opts.uid = user;
            }

            if (env.WEB_SHELL || shell) {
                proc = spawn(env.WEB_SHELL || shell, null, opts);
                stdin = proc.stdin;
                stdin.write(command + linebreak);
                if (terminate) {
                    stdin.end();
                }
            } else {
                proc = spawn(cmd, args, opts);
                stdin = proc.stdin;
            }

            proc.on("error", function (err) {
                if (err.code === "ENOENT") {
                    err.message = cmd + ": command not found";
                }
                socket.emit("console", err.message);
            });

            proc.stdout.setEncoding("utf8");
            proc.stdout.on("data", function (data) {
                socket.emit("console", data);
            });

            proc.stderr.setEncoding("utf8");
            proc.stderr.on("data", function (data) {
                if (data.indexOf("execvp():") === 0) {
                    data = cmd + ": command not found";
                }
                socket.emit("console", data);
            });

            proc.on("close", function () { ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.web-terminal.command" id="apidoc.module.web-terminal.command">module web-terminal.command</a></h1>


    <h2>
        <a href="#apidoc.element.web-terminal.command.parse" id="apidoc.element.web-terminal.command.parse">
        function <span class="apidocSignatureSpan">web-terminal.command.</span>parse
        <span class="apidocSignatureSpan">(commandLine)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (commandLine) {
    "use strict";

    var i,
        buffer  = "",
        args    = [],
        opened,
        escape;

    for (i = 0; i &lt; commandLine.length; i++) {
        var c = commandLine[i];

        if (c === " " &amp;&amp; !opened) {
            if (buffer !== "") {
                args.push(buffer);
                buffer = "";
            }
            continue;
        }

        if ((c === "\"" || c === "'") &amp;&amp; !escape) {
            if (c === opened) {
                opened = null;
            } else {
                opened = c;
            }
            continue;
        }

        if (c === "\\" &amp;&amp; opened &amp;&amp; !escape) {
            escape = true;
            continue;
        }

        if (escape) {
            escape = false;
        }

        buffer += c;
    }

    if (buffer !== "") {
        args.push(buffer);
    }

    return args;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

        socket.on("console", function (command) {
            var i, arg, basePath;

            if (stdin) {
stdin.write(command + linebreak);
            } else {
args    = cmdLine.<span class="apidocCodeKeywordSpan">parse</span>(command);
cmd     = args.splice(0, 1)[0];

switch (cmd) {
case "cd":
    arg = args[0];
    if (arg[0] === "~") {
        basePath = home;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.web-terminal.streams" id="apidoc.module.web-terminal.streams">module web-terminal.streams</a></h1>


    <h2>
        <a href="#apidoc.element.web-terminal.streams.ReplStream" id="apidoc.element.web-terminal.streams.ReplStream">
        function <span class="apidocSignatureSpan">web-terminal.streams.</span>ReplStream
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ReplStream() {
    "use strict";

    if (!(this instanceof ReplStream)) {
        return new ReplStream();
    }

    stream.Transform.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
proc.on("close", function () {
    stdin = null;
    socket.emit("exit", "");
});
        }

        function startRepl() {
var input   = streams.<span class="apidocCodeKeywordSpan">ReplStream</span>(),
    output  = streams.ReplStream();

input.setEncoding("utf8");
output.setEncoding("utf8");

stdin = input;
output.on("data", function (data) {
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>